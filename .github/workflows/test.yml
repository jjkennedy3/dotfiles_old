on: [push]

name: CI

jobs:
  build_and_test:
    name: Test
    runs-on: macOS-latest
    steps:
      - uses: actions/checkout@master
      - name: Cache Homebrew Cellar
        uses: actions/cache@v1
        with:
          path: /usr/local/Cellar/
          key: ${{ runner.os }}-cellar
      - name: Cache Homebrew Opt
        uses: actions/cache@v1
        with:
          path: /usr/local/opt/
          key: ${{ runner.os }}-opt
      - name: Run bootstrap
        shell: bash
        run: |
          ./.bootstrap.sh | tee
        env:
          REPO: ${{github.workspace}}
          DOTFILES_REF: ${{github.sha}}
          SKIP_SLOW_DEPENDENCIES: "1"
          HOMEBREW_BUNDLE_BREW_SKIP: "node"
